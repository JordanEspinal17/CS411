<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movie Playlist Generator</title>
    <link rel="stylesheet" href="style.css">
    <!-- Fontawesome Link for Icons -->
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css">
  </head>
  <body>
    <header>
      <nav class="navbar">
        <h2 id="userEmail"></h2>
        <input type="checkbox" id="menu-toggler">
        <label for="menu-toggler" id="hamburger-btn">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="white" width="24px" height="24px">
            <path d="M0 0h24v24H0z" fill="none"/>
            <path d="M3 18h18v-2H3v2zm0-5h18V11H3v2zm0-7v2h18V6H3z"/>
          </svg>
        </label>
        <ul class="all-links">
          <li><a href="#search">Search</a></li>
          <li><a href="#playlist">Playlist</a></li>
          <li><a href="../LoginSignup/login.html">Logout</a></li>
        </ul>
      </nav>
    </header>

    <script>
      // Extract email from the URL parameters
      const urlParams = new URLSearchParams(window.location.search);
      const userEmail = urlParams.get('email');
      const emailWithoutDomain = userEmail.split('@')[0];
      document.getElementById('userEmail').textContent = 'Welcome ' + emailWithoutDomain + "!"
    </script>


    <section class="search" id="search">
      <div class="container">
        <form action="" class="search-bar">
            <input type="text" placeholder="search for a movie" name="q" id="searchInput">
            <button type="submit"><img src="images/search.png"><i</button>
  
        </form>
      </div>
    </section>

    <script type="module">
      const logoutLink = document.querySelector("#logoutLink");

      const userSignOut = async () => {
          await signOut(auth)
              .then(() => {
                  alert("You have signed out successfully!");
                  window.location.href = 'login.html'; 
              })
              .catch((error) => {
                  console.error("Sign-out failed:", error);
              });
      };

      checkAuthState();

      logoutLink.addEventListener('click', (event) => {
          event.preventDefault(); 
          userSignOut(); // Call sign-out function when link clicked
      });

      
    </script>

    <section class="playlist" id="playlist">
      <h2>Playlist</h2>
      <p>Explore our curated playlist for you.</p>
      <ul class="sections" id="playlistResults">
        
      </ul>
    </section>

  
    <footer>
      <div>
        <span>Copyright Â© 2023 All Rights Reserved</span>
        <span class="link">
            <a href="#">Home</a>
        </span>
      </div>
    </footer>

  </body>
</html>
